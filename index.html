<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Earthquake Globe</title>

  <!-- CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- D3 + TopoJSON -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://d3js.org/topojson.v3.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
</head>

<body>

  <!-- Page 1 (Intro)-->
  <header id = "hero" class="hero">
    <h1>Shaking Across Scales: Global Earthquake Trends</h1>
    <p>
      On a planet of constant motions, hundreds of earthquakes ripple across continents and fault lines. 
      While some regions rumble under dense seismic sensors and others shake almost unnoticed, most never 
      make headlines. What will this entail for the distance across seismic stations? Does being in a "danger zone"
      affect us tremendously in times of danger? 
    </p>
  </header>

  <!-- Page 2 (Earth layers)-->
  <section id="earth-structure-section" class="full-page image-page">
    <h1>Layers of Earth</h1>

    <div class="image-wrap image-hotspot-wrap" id="earth-image-wrap">
      <img
        id="earth-structure-img"
        src="images/earth.PNG"
        alt="Cross-section illustration of Earth's layers: crust, lithosphere, asthenosphere, mantle, core."
        loading="lazy"
      />

      <!-- Invisible hotspots (no visible markers). Tweak left/top percentages so each covers a layer -->
      <button class="hotspot invisible" data-name="Crust"
              data-desc="This is us! It's the solid outermost, rocky layer that contains the continental and oceanic floor." style="left:20%; top:50%;"></button>

      <button class="hotspot invisible" data-name="Lithosphere (li·thuh·sfeer)"
              data-desc="The outermost rigid mechanical layer that is broken into tectonic plates; these move due to convection currents in the mantle underneath. " style="left:40%; top:50%;"></button>

      <button class="hotspot invisible" data-name="Asthenosphere (uhs·theh·nuh·sfeer)"
              data-desc="This ductile region of the upper mantle flows slowly; as layers lay atop one another, differing weights cause plains to slowly shift over long time periods. " style="left:55%; top:50%;"></button>

      <button class="hotspot invisible" data-name="Upper Mantle"
              data-desc="Hot, convecting rock that extends approximately 420 miles deep, making up most of Earth’s volume." style="left:60%; top:50%;"></button>

      <button class="hotspot invisible" data-name="Lower Mantle"
              data-desc="A middle layer of silicate rock that slowly deforms over geological timescales given the constant immense pressure it endures." style="left:70%; top:50%;"></button>

      <button class="hotspot invisible" data-name="Outer Core"
              data-desc="Molten iron and nickle that generates the Earth's magnetic field through convection currents; ranges from 72k to 90k degrees Fahrenheit." style="left:75%; top:50%;"></button>

              <button class="hotspot invisible" data-name="Inner Core"
              data-desc="A solid sphere of approximately 2260 miles in diameter; it endures immense pressure, allowing it to reach temperatures higher than the sun's surface." style="left:83%; top:50%;"></button>
    </div>

    <!-- INFO: this box is positioned under the image (bottom of the section) -->
    <div id="earth-layer-info" class="info-box">
      Hover over the middle of each layer or press tab to learn more.
    </div>
  </section>

  <!-- Page 3 (Globe 1)-->
  <section id="map-section">
    <div class="legend-container">
      <div class="legend-title">Magnitude</div>
      <div class="legend-bar"></div>
      <div class="legend-labels">
        <span id="legend-max">0</span>
        <span id="legend-mid">0</span>
        <span id="legend-min">0</span>
      </div>
    </div>
    <div class="globe-container">
        <svg id="globe-svg"></svg>
    </div>
    <div class="globe-container">
        <svg id="globe-svg-r"></svg>
    </div>
    <div class="story-text">
      <h2>Why Do Earthquakes Occur?</h2>
 
    
      <div class="feature-box"> 
        <h3>Plate Tectonics</h3> 
        <p> 
          Earthquakes predominantly occur due to the varying dynamic motions of tectonic plates, 
          which constitute the lithosphere. These plates continuously diverge, converge, or slide
          along plate boundaries, generating significant compressive stress that either cumulate to seismic
          events or be released abruptly as earthquakes.
        </p> 
      </div>

      <div class="feature-box"> 
        <h3>Fault Lines</h3> 
        <p> 
          Earth's crust consists of planar fractures or weakness zones where displacement occurs due to
          stress accumulation from relative motion. All faults have critical stress thresholds that when surpassed,
          will release elastic energy that manifests as an earthquake. 
        </p> 
      </div>

      <div class="feature-box"> 
        <h3>Seismic Waves</h3> 
        <p> 
          These are the primary mechanism that releases energy during an earthquake, transmitting it throughout Earth. 
          The two categories, P-waves (primary compressional waves) and S-waves (secondary shear waves), exhibit distinct
          propagation velocities that interact with Earth's heterogenous materials, influencing the intensity
          experienced at the surface level during earthquakes.
        </p> 
      </div>

      <div class="feature-box"> 
        <h3>Volcanic Activity</h3> 
        <p> 
          Volcanic processes contribute to earthquake occurence through the movement of magma and fluids within the Earth's crust.
          These magnmatic intrusions exert pressure on surrounding rock and can fracture the crust. Although volcanic earthquakes
          often serve as precurors to eruptive activity, it is vital to assess these events for eruption forecasting.
        </p> 
      </div>
    
    </div>
  </section>
  <div id="globe-tooltip">Drag to rotate</div>

  <!-- Page 4 (Globe 2 + Country) -->
  <section id="country-detail-section">
    <div class="globe-container">
      <svg id="globe-svg-2"></svg>
    </div>

    <div class="country-info">
      <h2 id="country-name">Click a country</h2>
      <p id="country-details">Details about the selected country will appear here.</p>

      <svg id="country-map" width="100%" height="300px"></svg>
    </div>
  </section>

  <!-- Page 5: California Earthquake Heatmap -->
  <section id="heatmap-section" class="full-page">
    <h2>California Earthquake Heatmap</h2>
    <p>Animated heatmap of earthquakes across California over time.</p>
    <div style="width: 100%; height: 80vh;">
      <iframe 
        src="CA_Heatmaps/california_earthquakes_heatmap_animated.html" 
        style="width:100%; height:100%; border:none;">
      </iframe>
    </div>
  </section>

  <!-- JS -->
  <script src="script.js" type="module"></script>

  <!-- Page navigation dots -->
<div id="page-nav">
  <span class="nav-dot" data-target="hero"></span>
  <span class="nav-dot" data-target="earth-structure-section"></span>
  <span class="nav-dot" data-target="map-section"></span>
  <span class="nav-dot" data-target="country-detail-section"></span>
  <span class="nav-dot" data-target="heatmap-section"></span>
</div>


</body>
</html>
